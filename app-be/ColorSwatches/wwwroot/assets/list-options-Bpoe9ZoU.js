import{r as o,e as A,u as N,a as M,b as T,j as e,T as O,B as Z}from"./index-BZHcMcxc.js";import{B as E,U as z,P as L}from"./uri-provider-Dxmbjys6.js";import{s as q,S as U,L as K,I as x,p as X}from"./template-CLAp3i7g.js";let b=function(t){return t.All="all",t.Page="page",t.Multi="multi",t.Single="single",t.Range="range",t}({});function P(t){if("id"in t)return t.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function Y(t,{selectedResources:u=[],allResourcesSelected:R=!1,resourceIDResolver:h=P,resourceFilter:n=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:P,resourceFilter:void 0}){const[f,l]=o.useState(u),[C,d]=o.useState(R),y=o.useCallback((g,r,i,j)=>{switch(g===b.All?d(r):C&&d(!1),g){case b.Single:l(a=>r?[...a,i]:a.filter(m=>m!==i));break;case b.All:case b.Page:if(n){const a=t.filter(n);l(r&&f.length<a.length?a.map(h):[])}else l(r?t.map(h):[]);break;case b.Multi:if(!i)break;l(a=>{const m=[],k=n?t.filter(n):t;for(let c=i[0];c<=i[1];c++)if(k.includes(t[c])){const S=h(t[c]);(r&&!a.includes(S)||!r&&a.includes(S))&&m.push(S)}return r?[...a,...m]:a.filter(c=>!m.includes(c))});break;case b.Range:if(!i)break;l(a=>{const c=(n?t.filter(n):t).map(h).slice(Number(i[0]),Number(i[1])+1),S=c.some(p=>f.includes(p));return!c.every(p=>f.includes(p))&&(r||S)?[...new Set([...a,...c]).values()]:a.filter(p=>!c.includes(p))});break}},[C,n,f,t,h]),v=o.useCallback(()=>{l([]),d(!1)},[]),w=o.useCallback(g=>{const i=[...f].filter(j=>!g.includes(j));l(i),i.length===0&&d(!1)},[f]);return{selectedResources:f,allResourcesSelected:C,handleSelectionChange:y,clearSelection:v,removeSelectedResources:w}}var B=function(u){return A.createElement("svg",Object.assign({viewBox:"0 0 20 20"},u),A.createElement("path",{d:"M11.5 8.25a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0v-4.25a.75.75 0 0 1 .75-.75Z"}),A.createElement("path",{d:"M9.25 9a.75.75 0 0 0-1.5 0v4.25a.75.75 0 0 0 1.5 0v-4.25Z"}),A.createElement("path",{fillRule:"evenodd",d:"M7.25 5.25a2.75 2.75 0 0 1 5.5 0h3a.75.75 0 0 1 0 1.5h-.75v5.45c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311c-.642.327-1.482.327-3.162.327h-.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311c-.327-.642-.327-1.482-.327-3.162v-5.45h-.75a.75.75 0 0 1 0-1.5h3Zm1.5 0a1.25 1.25 0 1 1 2.5 0h-2.5Zm-2.25 1.5h7v5.45c0 .865-.001 1.423-.036 1.848-.033.408-.09.559-.128.633a1.5 1.5 0 0 1-.655.655c-.074.038-.225.095-.633.128-.425.035-.983.036-1.848.036h-.4c-.865 0-1.423-.001-1.848-.036-.408-.033-.559-.09-.633-.128a1.5 1.5 0 0 1-.656-.655c-.037-.074-.094-.225-.127-.633-.035-.425-.036-.983-.036-1.848v-5.45Z"}))};B.displayName="DeleteIcon";const _=o.memo(function(u){const R=o.useId(),{showToast:h,hideToast:n}=N();return M(()=>(h({id:R,...u}),()=>{n({id:R})}),[u]),null}),$=()=>{const{optionSettings:t,getOptionSettings:u,isOptionSettingsLoading:R,deleteOptionSetting:h}=q(),[n,f]=o.useState([]),[l,C]=o.useState(1),d=10,[y,v]=o.useState(null),[w,g]=o.useState(!1);o.useEffect(()=>{f(t.slice((l-1)*d,l*d))},[t,l,d]),o.useEffect(()=>{(async()=>{await u()})()},[u]);const r=n.map(s=>({id:s.id})),i={singular:"option",plural:"options"},{selectedResources:j,allResourcesSelected:a,handleSelectionChange:m}=Y(r),k=T(),S=[{icon:B,destructive:!0,content:"Delete",onAction:async()=>{if(j.length!==0){v(null);try{const I=await h({optionSettingIds:j});I.status?(v("Options deleted successfully"),g(!0)):(v(I.message||"Failed to delete selected options"),g(!0))}catch(s){v("An error occurred while deleting options"),g(!0),console.error("Error deleting options:",s)}}}}];return e.jsxs("div",{className:"mt-10 mb-10",children:[e.jsx("div",{style:{marginBottom:4},children:e.jsx(O,{variant:"headingXl",as:"h2",children:"Option settings"})}),e.jsx("div",{style:{marginBottom:24},children:e.jsx(O,{variant:"bodyMd",as:"p",children:"Effortlessly manage and display product variants to drive more sales."})}),w&&y&&e.jsx(_,{content:y,error:!y.includes("successfully"),onDismiss:()=>{g(!1),v(null)}}),R?e.jsx("div",{children:e.jsx(U,{lines:10})}):e.jsx("div",{className:"option-setting-list",children:e.jsx(K,{children:e.jsx(x,{bulkActions:S,resourceName:i,itemCount:n.length,selectedItemsCount:a?"All":j.length,onSelectionChange:m,headings:[{title:"Option name"},{title:"Status"},{title:"Template"},{title:"Style"},{title:"Display page"},{title:"Action"}],pagination:{hasNext:n.length===d&&n.length>0&&t.length>l*d,onNext:()=>C(l+1),hasPrevious:l>1,onPrevious:()=>C(l-1)},children:n.map((s,I)=>{var D;return e.jsxs(x.Row,{id:s.id,selected:j.includes(s.id),position:I,children:[e.jsxs(x.Cell,{children:[e.jsx(O,{variant:"bodyMd",as:"span",children:s.name}),e.jsxs("div",{style:{color:"#98A2B3",fontSize:13},children:[((D=s.values)==null?void 0:D.length)??0," values"]})]}),e.jsx(x.Cell,{children:s.isActive?e.jsx(E,{tone:"success",children:"Active"}):e.jsx(E,{tone:"warning",children:"Inactive"})}),e.jsx(x.Cell,{children:s.template&&e.jsx(E,{tone:"info",children:s.template})}),e.jsx(x.Cell,{children:s.style&&e.jsx(E,{children:s.style})}),e.jsx(x.Cell,{children:s.position&&s.position.length>0&&s.position.map(p=>X[p]||p).sort().join(", ")}),e.jsx(x.Cell,{children:e.jsx(Z,{size:"slim",variant:"primary",onClick:()=>{k({to:z.KeepParameters(`/options/${s.productOptionId}`)})},children:"Setting"})})]},s.id)})})})})]})},Q=function(){return e.jsx(L,{children:e.jsx($,{})})};export{Q as component};
